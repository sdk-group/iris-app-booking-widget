{"version":3,"sources":["scripts/webwidget-api.js"],"names":[],"mappings":";;AAAA,CAAC,YAAY;AACZ,cADY;;AAEZ,KAAI,QAAQ,OAAO,SAAP,CAFA;AAGZ,KAAI,SAAS,OAAO,UAAP,CAHD;;AAKZ,KAAI,UAAU,SAAS,OAAT,CAAiB,GAAjB,EAAsB,IAAtB,EAA4B;AACzC,SAAO,QAAQ,EAAR,CADkC;AAEzC,OAAK,KAAL,GAAa,KAAb,CAFyC;AAGzC,MAAI,MAAM,SAAS,GAAT,CAH+B;AAIzC,SAAO,MAAM,GAAN,EAAW;AACjB,YAAS;AACR,cAAU,kBAAV;AACA,oBAAgB,kBAAhB;IAFD;AAIA,WAAQ,MAAR;AACA,SAAM,KAAK,SAAL,CAAe,IAAf,CAAN;GANM,EAOJ,IAPI,CAOC,UAAU,CAAV,EAAa;AACpB,UAAO,EAAE,IAAF,EAAP,CADoB;GAAb,CAPD,CASJ,IATI,CASC,UAAU,CAAV,EAAa;AACpB,OAAI,CAAC,EAAE,KAAF,EAAS,OAAO,QAAQ,MAAR,CAAe,EAAE,MAAF,CAAtB,CAAd;AACA,UAAO,EAAE,KAAF,CAFa;GAAb,CATR,CAJyC;EAA5B,CALF;;AAwBZ,QAAO,IAAP,GAAc,OAAO,IAAP,IAAe,EAAf,CAxBF;;AA0BZ,QAAO,IAAP,CAAY,SAAZ,GAAwB;AACvB,gBAAc,SAAS,YAAT,GAAwB;AACrC,UAAO,QAAQ,aAAR,EAAuB,IAAvB,CAA4B,UAAU,CAAV,EAAa;AAC/C,WAAO,EAAE,YAAF,CADwC;IAAb,CAAnC,CADqC;GAAxB;AAKd,qBAAmB,SAAS,iBAAT,CAA2B,WAA3B,EAAwC;AAC1D,UAAO,QAAQ,qBAAR,EAA+B;AACrC,iBAAa,WAAb;IADM,EAEJ,IAFI,CAEC,UAAU,CAAV,EAAa;AACpB,WAAO,EAAE,KAAF,CADa;IAAb,CAFR,CAD0D;GAAxC;AAOnB,qBAAmB,SAAS,iBAAT,CAA2B,WAA3B,EAAwC;AAC1D,UAAO,QAAQ,qBAAR,EAA+B;AACrC,iBAAa,WAAb;IADM,EAEJ,IAFI,CAEC,UAAU,CAAV,EAAa;AACpB,WAAO,CAAP,CADoB;IAAb,CAFR,CAD0D;GAAxC;AAOnB,oBAAkB,SAAS,gBAAT,CAA0B,YAA1B,EAAwC;AACzD,UAAO,QAAQ,yBAAR,EAAmC,YAAnC,CAAP,CADyD;GAAxC;AAGlB,eAAa,SAAS,WAAT,CAAqB,YAArB,EAAmC;AAC/C,UAAO,QAAQ,yBAAR,EAAmC,YAAnC,EAAiD,IAAjD,CAAsD,UAAU,CAAV,EAAa;AACzE,WAAO,EAAE,KAAF,CADkE;IAAb,CAA7D,CAD+C;GAAnC;AAKb,iBAAe,SAAS,aAAT,CAAuB,YAAvB,EAAqC;AACnD,UAAO,QAAQ,yBAAR,EAAmC,YAAnC,CAAP,CADmD;GAArC;EA5BhB,CA1BY;CAAZ,CAAD","file":"scripts/webwidget-api.js","sourcesContent":["(function () {\r\n\t\"use strict\";\r\n\tvar token = window.API_TOKEN;\r\n\tvar server = window.API_SERVER;\r\n\r\n\tvar request = function request(uri, data) {\r\n\t\tdata = data || {};\r\n\t\tdata.token = token;\r\n\t\tvar url = server + uri;\r\n\t\treturn fetch(url, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t},\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify(data)\r\n\t\t}).then(function (d) {\r\n\t\t\treturn d.json();\r\n\t\t}).then(function (d) {\r\n\t\t\tif (!d.state) return Promise.reject(d.reason);\r\n\t\t\treturn d.value;\r\n\t\t});\r\n\t};\r\n\r\n\twindow.IRIS = window.IRIS || {};\r\n\r\n\twindow.IRIS.webwidget = {\r\n\t\tgetTerminals: function getTerminals() {\r\n\t\t\treturn request('/agent/info').then(function (d) {\r\n\t\t\t\treturn d.ws_available;\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetTerminalLayout: function getTerminalLayout(terminal_id) {\r\n\t\t\treturn request('/terminal/bootstrap', {\r\n\t\t\t\tworkstation: terminal_id\r\n\t\t\t}).then(function (d) {\r\n\t\t\t\treturn d.views;\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetTerminalFields: function getTerminalFields(terminal_id) {\r\n\t\t\treturn request('/terminal/bootstrap', {\r\n\t\t\t\tworkstation: terminal_id\r\n\t\t\t}).then(function (d) {\r\n\t\t\t\treturn d;\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetAvailableDays: function getAvailableDays(ticket_query) {\r\n\t\t\treturn request('/prebook/available-days', ticket_query)\r\n\t\t},\r\n\t\tgetDaySlots: function getDaySlots(ticket_query) {\r\n\t\t\treturn request('/prebook/ticket-observe', ticket_query).then(function (d) {\r\n\t\t\t\treturn d.slots;\r\n\t\t\t});\r\n\t\t},\r\n\t\tconfirmTicket: function confirmTicket(ticket_query) {\r\n\t\t\treturn request('/prebook/ticket-confirm', ticket_query);\r\n\t\t}\r\n\t};\r\n})();\r\n"],"sourceRoot":"/source/"}